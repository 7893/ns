# R2 å­˜å‚¨ç»“æ„

## ğŸ“ ç›®å½•ç»“æ„

```
ns-data/
â”œâ”€â”€ apod/
â”‚   â””â”€â”€ 2025/10/03/
â”‚       â”œâ”€â”€ 20251003T000000.json          â† JSON å…ƒæ•°æ®
â”‚       â”œâ”€â”€ 20251003T000000_0.jpg         â† å›¾ç‰‡ (url)
â”‚       â””â”€â”€ 20251003T000000_1.jpg         â† å›¾ç‰‡ (hdurl)
â”‚
â”œâ”€â”€ epic/
â”‚   â””â”€â”€ 2025/10/03/
â”‚       â”œâ”€â”€ 20251003T000000.json          â† JSON å…ƒæ•°æ®
â”‚       â”œâ”€â”€ 20251003T000000_0.png         â† å›¾ç‰‡ 1
â”‚       â”œâ”€â”€ 20251003T000000_1.png         â† å›¾ç‰‡ 2
â”‚       â”œâ”€â”€ 20251003T000000_2.png         â† å›¾ç‰‡ 3
â”‚       â”œâ”€â”€ 20251003T000000_3.png         â† å›¾ç‰‡ 4
â”‚       â””â”€â”€ 20251003T000000_4.png         â† å›¾ç‰‡ 5
â”‚
â”œâ”€â”€ mars-rover-photos/
â”‚   â””â”€â”€ 2025/10/03/
â”‚       â”œâ”€â”€ 20251003T000000.json          â† JSON å…ƒæ•°æ®
â”‚       â”œâ”€â”€ 20251003T000000_0.jpg         â† ç…§ç‰‡ 1
â”‚       â”œâ”€â”€ 20251003T000000_1.jpg         â† ç…§ç‰‡ 2
â”‚       â””â”€â”€ ...                           â† æœ€å¤š 10 å¼ 
â”‚
â”œâ”€â”€ nasa-ivl/
â”‚   â””â”€â”€ 2025/10/03/
â”‚       â”œâ”€â”€ 20251003T080000.json          â† JSON å…ƒæ•°æ®
â”‚       â”œâ”€â”€ 20251003T080000_0.jpg         â† å›¾ç‰‡ 1
â”‚       â””â”€â”€ ...                           â† æœ€å¤š 5 å¼ 
â”‚
â”œâ”€â”€ earth/
â”‚   â””â”€â”€ 2025/10/05/
â”‚       â””â”€â”€ 20251005T000000.png           â† ç›´æ¥è¿”å›çš„å›¾ç‰‡
â”‚
â””â”€â”€ eonet/
    â””â”€â”€ 2025/10/03/
        â””â”€â”€ 20251003T080000.json          â† çº¯ JSON æ•°æ®
```

## ğŸ“Š æ•°æ®æºåˆ†ç±»

### 1. JSON + å›¾ç‰‡ä¸‹è½½

| æ•°æ®æº | JSON | å›¾ç‰‡æ•°é‡ | å›¾ç‰‡æ¥æº |
|--------|------|---------|---------|
| **apod** | âœ… | 1-2 | `url`, `hdurl` |
| **epic** | âœ… | 5 | æ„å»º URL |
| **mars-rover-photos** | âœ… | 10 | `photos[].img_src` |
| **nasa-ivl** | âœ… | 5 | `items[].links[].href` |

### 2. ç›´æ¥å›¾ç‰‡

| æ•°æ®æº | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| **earth** | PNG | API ç›´æ¥è¿”å›å›¾ç‰‡ |

### 3. çº¯ JSON

| æ•°æ®æº | è¯´æ˜ |
|--------|------|
| **asteroids-neows** | å°è¡Œæ˜Ÿæ•°æ® |
| **donki** | ç©ºé—´å¤©æ°”é€šçŸ¥ |
| **eonet** | åœ°çƒè§‚æµ‹äº‹ä»¶ |
| **exoplanet** | ç³»å¤–è¡Œæ˜Ÿæ•°æ® |
| **genelab** | åŸºå› å®éªŒå®¤æ•°æ® |
| **techport** | æŠ€æœ¯ç»„åˆ |
| **techtransfer** | æŠ€æœ¯è½¬ç§» |

## ğŸ“ æ–‡ä»¶å‘½åè§„åˆ™

### JSON æ–‡ä»¶
```
{source}/{year}/{month}/{day}/{timestamp}.json
```

### å›¾ç‰‡æ–‡ä»¶
```
{source}/{year}/{month}/{day}/{timestamp}_{index}.{ext}
```

### é”™è¯¯æ–‡ä»¶
```
{source}/{year}/{month}/{day}/{timestamp}_error.json
```

## ğŸ’¾ å­˜å‚¨ç©ºé—´ä¼°ç®—

### æ¯æ—¥æ•°æ®é‡

| ç±»å‹ | æ•°æ®æº | æ¬¡æ•°/å¤© | å•æ¬¡å¤§å° | æ¯æ—¥æ€»è®¡ |
|------|--------|---------|---------|---------|
| JSON | æ‰€æœ‰ | 58 | 30KB | 1.7MB |
| å›¾ç‰‡ | APOD | 1 | 2MB | 2MB |
| å›¾ç‰‡ | EPIC | 1 | 2.5MB (5Ã—500KB) | 2.5MB |
| å›¾ç‰‡ | Mars | 1 | 5MB (10Ã—500KB) | 5MB |
| å›¾ç‰‡ | NASA IVL | 24 | 2.5MB (5Ã—500KB) | 60MB |
| å›¾ç‰‡ | Earth | 0.14 | 1MB | 0.14MB |
| **æ€»è®¡** | - | - | - | **~71MB/å¤©** |

### æœˆåº¦/å¹´åº¦ä¼°ç®—

| å‘¨æœŸ | å­˜å‚¨é‡ | è¯´æ˜ |
|------|--------|------|
| æ¯æœˆ | ~2.1GB | 71MB Ã— 30 å¤© |
| æ¯å¹´ | ~25GB | 2.1GB Ã— 12 æœˆ |
| **è¶…å‡ºå…è´¹é¢åº¦** | âš ï¸ | å…è´¹ 10GB |

## âš ï¸ å­˜å‚¨ä¼˜åŒ–å»ºè®®

### æ–¹æ¡ˆ 1ï¼šé™åˆ¶å›¾ç‰‡æ•°é‡ï¼ˆæ¨èï¼‰
```javascript
// å‡å°‘ä¸‹è½½æ•°é‡
case "nasa-ivl":
  data.collection.items.slice(0, 2)  // 5 â†’ 2
  
case "mars-rover-photos":
  data.photos.slice(0, 5)  // 10 â†’ 5
```
**èŠ‚çœ**: ~40MB/å¤© â†’ ~1.2GB/æœˆ âœ…

### æ–¹æ¡ˆ 2ï¼šé™ä½å›¾ç‰‡è´¨é‡
```javascript
// ä½¿ç”¨ç¼©ç•¥å›¾è€ŒéåŸå›¾
if (data.url) urls.push(data.url);  // ä¸ä¸‹è½½ hdurl
```
**èŠ‚çœ**: ~1MB/å¤©

### æ–¹æ¡ˆ 3ï¼šå®šæœŸæ¸…ç†æ—§æ•°æ®
```bash
# ä¿ç•™æœ€è¿‘ 3 ä¸ªæœˆæ•°æ®
wrangler r2 object delete ns-data --prefix="apod/2024/"
```

### æ–¹æ¡ˆ 4ï¼šé€‰æ‹©æ€§ä¸‹è½½
```javascript
// åªä¸‹è½½ç‰¹å®šæ•°æ®æºçš„å›¾ç‰‡
const IMAGE_SOURCES = ["apod", "epic"];  // ä¸ä¸‹è½½ Mars å’Œ NASA IVL
```
**èŠ‚çœ**: ~65MB/å¤© â†’ ~2GB/æœˆ âœ…

## ğŸ¯ æ¨èé…ç½®

**å½“å‰é…ç½®ï¼ˆå…¨é‡ä¸‹è½½ï¼‰ï¼š**
- æœˆå­˜å‚¨ï¼š~2.1GB
- å¹´å­˜å‚¨ï¼š~25GB
- **è¶…å‡ºå…è´¹é¢åº¦** âš ï¸

**ä¼˜åŒ–é…ç½®ï¼ˆæ¨èï¼‰ï¼š**
```javascript
// å‡å°‘å›¾ç‰‡æ•°é‡
epic: 5 â†’ 3 å¼ 
mars: 10 â†’ 3 å¼ 
nasa-ivl: 5 â†’ 1 å¼ 
```
- æœˆå­˜å‚¨ï¼š~900MB
- å¹´å­˜å‚¨ï¼š~10.8GB
- **æ¥è¿‘å…è´¹é¢åº¦** âš ï¸

**æœ€å°é…ç½®ï¼ˆä»…å…³é”®å›¾ç‰‡ï¼‰ï¼š**
```javascript
// åªä¸‹è½½ APOD å’Œ Earth
const IMAGE_SOURCES = ["apod", "earth"];
```
- æœˆå­˜å‚¨ï¼š~150MB
- å¹´å­˜å‚¨ï¼š~1.8GB
- **å®Œå…¨åœ¨å…è´¹é¢åº¦å†…** âœ…

## ğŸ“ æŸ¥çœ‹å­˜å‚¨ä½¿ç”¨

```bash
# æŸ¥çœ‹æ€»æ–‡ä»¶æ•°
wrangler r2 object list ns-data | wc -l

# æŸ¥çœ‹ç‰¹å®šæ•°æ®æº
wrangler r2 object list ns-data --prefix="apod/"

# æŸ¥çœ‹ä»Šå¤©çš„æ–‡ä»¶
wrangler r2 object list ns-data --prefix="apod/2025/10/03/"
```

## ğŸ”— è®¿é—®æ–‡ä»¶

```bash
# ä¸‹è½½ JSON
wrangler r2 object get ns-data apod/2025/10/03/20251003T000000.json

# ä¸‹è½½å›¾ç‰‡
wrangler r2 object get ns-data apod/2025/10/03/20251003T000000_0.jpg
```
