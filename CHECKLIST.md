# éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### 1. è´¦å·å‡†å¤‡
- [ ] Cloudflare è´¦å·å·²åˆ›å»º
- [ ] NASA API Key å·²è·å–ï¼ˆhttps://api.nasa.govï¼‰
- [ ] GitHub è´¦å·å·²è¿æ¥ï¼ˆå¯é€‰ï¼Œç”¨äº CI/CDï¼‰

### 2. å·¥å…·å®‰è£…
- [ ] Node.js 18+ å·²å®‰è£…
- [ ] npm å·²å®‰è£…
- [ ] Wrangler CLI å·²å®‰è£… (`npm install -g wrangler`)
- [ ] å·²ç™»å½• Cloudflare (`wrangler login`)

### 3. é…ç½®æ–‡ä»¶
- [ ] `worker/wrangler.toml` å·²é…ç½®
  - [ ] NASA_API_KEY å·²è®¾ç½®
  - [ ] D1 database_id å·²å¡«å†™
  - [ ] KV namespace id å·²å¡«å†™
- [ ] `frontend/script.js` ä¸­ API_BASE å·²æ›´æ–°
- [ ] `.env` æ–‡ä»¶å·²åˆ›å»ºï¼ˆå¯é€‰ï¼‰

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰
- [ ] è¿è¡Œ `./deploy-all.sh`
- [ ] ç­‰å¾…éƒ¨ç½²å®Œæˆ
- [ ] è®°å½• Worker URL
- [ ] è®°å½• Pages URL

### æ‰‹åŠ¨éƒ¨ç½²
- [ ] åˆ›å»º R2 bucket: `wrangler r2 bucket create ns-data`
- [ ] åˆ›å»º D1 æ•°æ®åº“: `wrangler d1 create ns-db`
- [ ] åˆ›å»º KV å‘½åç©ºé—´: `wrangler kv:namespace create CACHE`
- [ ] æ›´æ–° `worker/wrangler.toml` ä¸­çš„ ID
- [ ] åˆå§‹åŒ–æ•°æ®åº“: `wrangler d1 execute ns-db --file=schema.sql`
- [ ] éƒ¨ç½² Worker: `cd worker && wrangler deploy`
- [ ] éƒ¨ç½² Frontend: `cd frontend && npx wrangler pages deploy .`

## âœ… éƒ¨ç½²åéªŒè¯

### 1. Worker æµ‹è¯•
- [ ] è®¿é—® Worker URLï¼Œè¿”å›çŠ¶æ€ OK
- [ ] æµ‹è¯• `/api/stats` ç«¯ç‚¹
- [ ] æµ‹è¯• `/collect?source=apod` æ‰‹åŠ¨è§¦å‘
- [ ] æµ‹è¯• `/api/latest?source=apod` è·å–æ•°æ®
- [ ] æµ‹è¯• `/api/list?source=apod` åˆ—å‡ºæ–‡ä»¶

### 2. Frontend æµ‹è¯•
- [ ] è®¿é—® Pages URL
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] æ•°æ®æºåˆ—è¡¨æ˜¾ç¤º
- [ ] ç‚¹å‡»æ•°æ®æºå¯æŸ¥çœ‹æ•°æ®

### 3. å­˜å‚¨éªŒè¯
- [ ] R2 bucket ä¸­æœ‰æ•°æ®æ–‡ä»¶
- [ ] D1 æ•°æ®åº“æœ‰æ—¥å¿—è®°å½•
- [ ] KV ç¼“å­˜æ­£å¸¸å·¥ä½œ

### 4. Cron éªŒè¯
- [ ] ç­‰å¾…ä¸‹ä¸€ä¸ªè°ƒåº¦æ—¶é—´
- [ ] æ£€æŸ¥æ˜¯å¦è‡ªåŠ¨æ”¶é›†æ•°æ®
- [ ] æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ‰§è¡Œ

## ğŸ§ª æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
./test.sh

# æ‰‹åŠ¨æµ‹è¯•
WORKER_URL="https://ns.YOUR_SUBDOMAIN.workers.dev"

# 1. çŠ¶æ€æ£€æŸ¥
curl "$WORKER_URL/"

# 2. ç»Ÿè®¡ä¿¡æ¯
curl "$WORKER_URL/api/stats"

# 3. æ‰‹åŠ¨è§¦å‘
curl "$WORKER_URL/collect?source=apod"

# 4. è·å–æ•°æ®
curl "$WORKER_URL/api/latest?source=apod"

# 5. åˆ—å‡ºæ–‡ä»¶
curl "$WORKER_URL/api/list?source=apod"
```

## ğŸ“Š ç›‘æ§æ£€æŸ¥

### å®æ—¶æ—¥å¿—
- [ ] è¿è¡Œ `wrangler tail` æŸ¥çœ‹å®æ—¶æ—¥å¿—
- [ ] ç¡®è®¤è¯·æ±‚æ­£å¸¸å¤„ç†
- [ ] ç¡®è®¤æ— é”™è¯¯æ—¥å¿—

### Cloudflare Dashboard
- [ ] ç™»å½• Cloudflare Dashboard
- [ ] æŸ¥çœ‹ Workers åˆ†æ
- [ ] æŸ¥çœ‹ R2 ä½¿ç”¨é‡
- [ ] æŸ¥çœ‹ D1 æŸ¥è¯¢ç»Ÿè®¡
- [ ] æŸ¥çœ‹ KV æ“ä½œç»Ÿè®¡

## ğŸ”§ æ•…éšœæ’æŸ¥

### Worker éƒ¨ç½²å¤±è´¥
- [ ] æ£€æŸ¥ `wrangler.toml` é…ç½®
- [ ] æ£€æŸ¥ API Token æƒé™
- [ ] è¿è¡Œ `wrangler deploy --verbose`
- [ ] æŸ¥çœ‹é”™è¯¯æ—¥å¿—

### R2 è®¿é—®å¤±è´¥
- [ ] ç¡®è®¤ bucket å·²åˆ›å»º
- [ ] æ£€æŸ¥ binding åç§°
- [ ] æ£€æŸ¥æƒé™è®¾ç½®

### D1 è¿æ¥å¤±è´¥
- [ ] ç¡®è®¤æ•°æ®åº“å·²åˆ›å»º
- [ ] æ£€æŸ¥ database_id
- [ ] è¿è¡Œ schema.sql åˆå§‹åŒ–

### KV è¯»å†™å¤±è´¥
- [ ] ç¡®è®¤å‘½åç©ºé—´å·²åˆ›å»º
- [ ] æ£€æŸ¥ namespace id
- [ ] æ£€æŸ¥ binding åç§°

### API è¿”å›é”™è¯¯
- [ ] æ£€æŸ¥ NASA API Key
- [ ] æŸ¥çœ‹ Worker æ—¥å¿—
- [ ] æµ‹è¯• NASA API ç›´æ¥è®¿é—®

## ğŸ” å®‰å…¨æ£€æŸ¥

- [ ] API Key æœªç¡¬ç¼–ç åœ¨ä»£ç ä¸­
- [ ] ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- [ ] HTTPS å¼ºåˆ¶å¯ç”¨
- [ ] CORS æ­£ç¡®é…ç½®
- [ ] é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²æ•æ„Ÿæ•°æ®

## ğŸ“ æ–‡æ¡£æ£€æŸ¥

- [ ] README.md å·²æ›´æ–°
- [ ] API æ–‡æ¡£å·²å®Œå–„
- [ ] éƒ¨ç½²æ–‡æ¡£å·²éªŒè¯
- [ ] ç¤ºä¾‹ä»£ç å¯è¿è¡Œ

## ğŸ¯ æ€§èƒ½æ£€æŸ¥

- [ ] API å“åº”æ—¶é—´ <100ms
- [ ] ç¼“å­˜å‘½ä¸­ç‡ >80%
- [ ] æ•°æ®æ”¶é›†æˆåŠŸç‡ >95%
- [ ] æ— å†…å­˜æ³„æ¼

## ğŸ”„ CI/CD æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰

- [ ] GitHub Actions å·²é…ç½®
- [ ] CLOUDFLARE_API_TOKEN Secret å·²è®¾ç½®
- [ ] æ¨é€ä»£ç è§¦å‘è‡ªåŠ¨éƒ¨ç½²
- [ ] éƒ¨ç½²æˆåŠŸé€šçŸ¥

## ğŸ“ˆ ä½¿ç”¨é‡æ£€æŸ¥

### å…è´¹é¢åº¦
- [ ] Workers: <100k è¯·æ±‚/å¤©
- [ ] R2: <10GB å­˜å‚¨
- [ ] D1: <5GB æ•°æ®
- [ ] KV: <1GB å­˜å‚¨

### ç›‘æ§å‘Šè­¦
- [ ] è®¾ç½®ä½¿ç”¨é‡å‘Šè­¦ï¼ˆå¯é€‰ï¼‰
- [ ] æ¥è¿‘é™é¢æ—¶æ”¶åˆ°é€šçŸ¥

## âœ¨ å®Œæˆæ ‡å¿—

å½“ä»¥ä¸‹æ‰€æœ‰é¡¹éƒ½å®Œæˆæ—¶ï¼Œéƒ¨ç½²æˆåŠŸï¼š

- âœ… Worker æ­£å¸¸å“åº”
- âœ… Frontend å¯è®¿é—®
- âœ… API è¿”å›æ­£ç¡®æ•°æ®
- âœ… Cron è‡ªåŠ¨æ‰§è¡Œ
- âœ… æ•°æ®æ­£å¸¸å­˜å‚¨
- âœ… æ—¥å¿—æ­£å¸¸è®°å½•
- âœ… ç¼“å­˜æ­£å¸¸å·¥ä½œ
- âœ… æµ‹è¯•å…¨éƒ¨é€šè¿‡

## ğŸ‰ æ­å–œï¼

å¦‚æœæ‰€æœ‰æ£€æŸ¥é¡¹éƒ½é€šè¿‡ï¼Œä½ çš„ NS ç³»ç»Ÿå·²ç»æˆåŠŸéƒ¨ç½²åˆ° Cloudflareï¼

ä¸‹ä¸€æ­¥ï¼š
1. ç›‘æ§ç³»ç»Ÿè¿è¡Œ
2. æŸ¥çœ‹æ”¶é›†çš„æ•°æ®
3. æ ¹æ®éœ€è¦è°ƒæ•´é…ç½®
4. äº«å—é›¶æˆæœ¬çš„ NASA æ•°æ®æœåŠ¡ï¼
